<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#000000" />
  <link rel="manifest" href="./manifest.json" />
  <title>MAKER</title>
  <link rel="stylesheet" href="./app.css" />
</head>
<body>

  <!-- App Container -->
  <div id="app" role="application" aria-label="MAKER Lernsystem"></div>

  <!-- AR Layer -->
  <div id="ar-layer" hidden></div>

  <script src="./app.js"></script>

  <script>
    // Service Worker Registration (robust & offline-safe)
    (function () {
      if (!("serviceWorker" in navigator)) {
        console.warn("Service Worker not supported.");
        return;
      }

      // HTTPS required except localhost
      const isLocalhost = location.hostname === "localhost" || location.hostname === "127.0.0.1";
      if (location.protocol !== "https:" && !isLocalhost) {
        console.warn("Service Worker requires HTTPS.");
        return;
      }

      window.addEventListener("load", function () {
        navigator.serviceWorker.register("./sw.js")
          .then(function (registration) {
            console.log("SW registered:", registration.scope);
          })
          .catch(function (error) {
            console.error("SW registration failed:", error);
          });
      });
    })();
  </script>

</body>
</html>
